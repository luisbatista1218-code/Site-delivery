<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Delivery App Completo</title>
<style>
body {margin:0;font-family:sans-serif;background:#1b0033;color:#fff;}
.top {display:flex;justify-content:space-between;align-items:center;padding:10px;background:#2a0050;}
.top button {background:#fff;color:#2a0050;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;}
.main {padding:10px;}
.hero {width:100%;height:60vh;border-radius:8px;overflow:hidden;background:#300046;display:flex;justify-content:center;align-items:center;font-size:24px;}
.nav {position:fixed;bottom:0;left:0;right:0;background:#2a0050;padding:8px;display:flex;justify-content:space-around;}
.nav button {background:#fff;color:#2a0050;border:none;padding:10px 12px;border-radius:8px;cursor:pointer;}
.card {background:#fff;color:#000;padding:8px;border-radius:8px;margin:8px 0;}
.card img {width:100%;height:160px;object-fit:cover;border-radius:6px;}
.card button {cursor:pointer;}
</style>
</head>
<body>

<div class="top">
  <button onclick="openContact()">Contato</button>
  <strong>Delivery</strong>
  <button onclick="openUser()">Usuário/Admin</button>
</div>

<div class="main">
  <div id="view"></div>
</div>

<div class="nav">
  <button onclick="showHome()">Início</button>
  <button onclick="showCategories()">Categoria</button>
  <button onclick="showCart()">Carrinho</button>
  <button onclick="showNotifs()">Notificações</button>
</div>

<script>
// --- DADOS GLOBAIS ---
let cart = [];
let notifications = [];
let orders = [];
let products = [
  {id:1,categoria:"Pizza",nome:"Pizza Calabresa",descricao:"Pizza com borda de requeijão",preco:30.00,imagem:"pizza-calabresa.jpg"}
];

// --- FUNÇÕES PRINCIPAIS ---
function openContact(){ 
  alert("WhatsApp: (11) 99999-9999\nEmail: contato@delivery.com"); 
}

function openUser(){
  let tipo = prompt("Digite 'admin' para acessar admin, deixe vazio para usuário:");
  if(tipo && tipo.toLowerCase()==='admin'){
    let email = prompt("Email:");
    let senha = prompt("Senha:");
    if(email==="admin@local" && senha==="admin123"){ 
      showAdminOrders(); 
    } else {
      alert("Credenciais inválidas");
    }
  }
}

function showHome(){
  document.getElementById('view').innerHTML = `
    <div class='hero' style='
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                  url("banner-inicial.jpg");
      background-size: cover; 
      background-position: center;
      color: white;
      text-align: center;
    '>
      <h2>Bem-vindo ao Delivery</h2>
      <p>Peça suas pizzas favoritas!</p>
    </div>`;
}

function showCategories(){
  let html = "<h3>Categoria: Pizza</h3>";
  products.forEach(p => {
    html += `<div class='card'>
      <img src='${p.imagem}' alt='${p.nome}' onerror="this.src='https://via.placeholder.com/400x200?text=Imagem+Não+Encontrada'"/>
      <h4>${p.nome}</h4>
      <p>${p.descricao}</p>
      <div>
        <button onclick='addToCart(${p.id})'>Adicionar ao Carrinho</button>
        <span style='margin-left:10px; font-weight:bold'>R$ ${p.preco.toFixed(2)}</span>
      </div>
    </div>`;
  });
  document.getElementById('view').innerHTML = html;
}

function addToCart(id){
  let p = products.find(x => x.id === id);
  if (!p) return;
  
  let item = cart.find(c => c.id === id);
  if (item) {
    item.qtd++;
  } else {
    cart.push({
      id: p.id,
      nome: p.nome,
      preco: p.preco,
      qtd: 1
    });
  }
  showCart();
  alert(`${p.nome} adicionado ao carrinho!`);
}

function showCart(){
  let html = '<h3>Seu Carrinho</h3>';
  
  if(cart.length === 0){ 
    html += '<p>Carrinho vazio</p>';
  } else {
    let total = 0;
    cart.forEach(item => {
      let subtotal = item.preco * item.qtd;
      total += subtotal;
      html += `<div class='card'>
        <b>${item.nome}</b>
        <div>Quantidade: 
          <button onclick='decQty(${item.id})'>-</button> 
          ${item.qtd} 
          <button onclick='incQty(${item.id})'>+</button>
        </div>
        <div>Subtotal: R$ ${subtotal.toFixed(2)}</div>
      </div>`;
    });
    
    html += `
      <div class='card'>
        <h3>Total: R$ ${total.toFixed(2)}</h3>
        <button onclick='startCheckout()' style='background: #2a0050; color: white; padding: 10px; border: none; border-radius: 5px; margin-right: 10px;'>Finalizar Pedido</button>
        <button onclick='clearCart()' style='background: #ff4444; color: white; padding: 10px; border: none; border-radius: 5px;'>Limpar Carrinho</button>
      </div>`;
  }
  
  document.getElementById('view').innerHTML = html;
}

function incQty(id){ 
  let item = cart.find(c => c.id === id); 
  if(item){ 
    item.qtd++; 
    showCart(); 
  } 
}

function decQty(id){ 
  let item = cart.find(c => c.id === id); 
  if(item){ 
    item.qtd--; 
    if(item.qtd <= 0) {
      cart = cart.filter(x => x.id !== id);
    }
    showCart(); 
  } 
}

function clearCart(){ 
  if(confirm('Tem certeza que deseja limpar o carrinho?')){ 
    cart = []; 
    showCart(); 
  } 
}

function startCheckout(){
  if(cart.length === 0){ 
    alert('Carrinho vazio'); 
    return; 
  }
  
  let localizacao = prompt('Endereço de entrega:');
  if(!localizacao) return;
  
  let descricao = prompt('Complemento ou ponto de referência:');
  if(descricao && descricao.length > 30) {
    descricao = descricao.substring(0, 30);
  }
  
  let codigoPedido = Math.floor(Math.random() * 900 + 100);
  let totalPedido = cart.reduce((total, item) => total + (item.preco * item.qtd), 0);
  
  let pedido = {
    codigo: codigoPedido,
    produtos: [...cart],
    total: totalPedido,
    local: localizacao,
    desc: descricao || '',
    data: new Date().toLocaleString('pt-BR'),
    status: 'Pedido recebido'
  };
  
  orders.push(pedido);
  notifications.push({
    codigo: codigoPedido,
    msg: `Pedido realizado - R$ ${totalPedido.toFixed(2)}`,
    data: pedido.data
  });
  
  alert(`Pedido #${codigoPedido} confirmado!\nTotal: R$ ${totalPedido.toFixed(2)}\nEntrega em: ${localizacao}`);
  
  cart = [];
  showHome();
}

function showNotifs(){
  let html = '<h3>Notificações</h3>';
  
  if(notifications.length === 0){ 
    html += '<p>Nenhuma notificação.</p>';
  } else {
    notifications.slice().reverse().forEach(notif => {
      html += `<div class='card'>
        <b>Pedido #${notif.codigo}</b>
        <div>${notif.msg}</div>
        <small>${notif.data}</small>
      </div>`;
    });
  }
  
  document.getElementById('view').innerHTML = html;
}

function showAdminOrders(){
  let html = '<h3>Pedidos - Área Administrativa</h3>';
  
  if(orders.length === 0){ 
    html += '<p>Nenhum pedido realizado.</p>';
  } else {
    orders.slice().reverse().forEach(pedido => {
      html += `<div class='card'>
        <h4>Pedido #${pedido.codigo}</h4>
        <p><strong>Status:</strong> ${pedido.status}</p>
        <p><strong>Data:</strong> ${pedido.data}</p>
        <p><strong>Endereço:</strong> ${pedido.local}</p>
        <p><strong>Total:</strong> R$ ${pedido.total.toFixed(2)}</p>
        <p><strong>Itens:</strong> ${pedido.produtos.map(p => `${p.nome} (x${p.qtd})`).join(', ')}</p>
        <button onclick='atualizarStatus(${pedido.codigo})'>Atualizar Status</button>
      </div>`;
    });
  }
  
  document.getElementById('view').innerHTML = html;
}

function atualizarStatus(codigo){
  let novoStatus = prompt('Novo status do pedido:');
  if(novoStatus){
    let pedido = orders.find(o => o.codigo === codigo);
    if(pedido){
      pedido.status = novoStatus;
      alert(`Status do pedido #${codigo} atualizado para: ${novoStatus}`);
      showAdminOrders();
    }
  }
}

// --- INICIALIZAÇÃO ---
window.showHome = showHome;
window.showCategories = showCategories;
window.showCart = showCart;
window.showNotifs = showNotifs;
window.addToCart = addToCart;
window.incQty = incQty;
window.decQty = decQty;
window.clearCart = clearCart;
window.startCheckout = startCheckout;
window.showAdminOrders = showAdminOrders;
window.atualizarStatus = atualizarStatus;
window.openContact = openContact;
window.openUser = openUser;

showHome();
</script>

</body>
</html>
  
